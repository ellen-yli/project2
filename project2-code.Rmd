---
title: "Project2"
author: "Yuzhi Li, Katelyn Settlemyre"
date: "2022-10-03"
output: 
  html_document:
    toc: TRUE
    toc_depth: 2
---

```{r packages, include=FALSE}
#packages needed to get API data and work with it
library(httr)
library(jsonlite)
library(tidyverse)
```


# Example of R-code that can contact Food data API by searching criteria

```{r}
res<-GET("https://api.spoonacular.com/recipes/complexSearch?query=chicken&maxFat=60&number=5&apiKey=be3c2a74ce6c4f0c83b254b34ceca7f5")
```

# Requirements

Here, we list the packages required to interact with the API and use the functions in this vignette.
- `httr` \- used to access the API  
- `jsonlite` \- used to convert the data from the API into a data frame  
- `tidyverse` \- used for data manipulation and graphing

# API Interaction Functions
## `recipe.search`
Search for recipes given query (i.e., what are you looking for?), diet type, type of dish (such as breakfast, dessert, side dish, etc.), the maximum number of carbs, the minimum amount of protein, and the maximum amount of fat.
```{r}
recipe.search<- function(key=NULL, query=NULL, diet=NULL, type=NULL, maxCarbs=NULL, minProtein=NULL, maxFat=NULL){
  if(is.null(key)){
    return("your API Key is required.")
  }
  basic.url<-"https://api.spoonacular.com/recipes/complexSearch"
  search.opt<-list(query=query, diet=diet, type=type, maxCarbs=type, minProtein=minProtein, maxFat=maxFat, apiKey=key)
  search.opt2<-search.opt[-which(sapply(search.opt, is.null))]
  res<-paste0(basic.url,"?")
  for(i in i:length(search.opt2)){
    res<-paste0(res,"&", names(search.opt2[i]), "=", search.opt2[i])
  }
  data<-httr::GET(res)
  mydf<- jsonlite::fromJSON(data$url)
  result<-as.data.frame(mydf)
      return(result)
    }
```

Search recipe example by using the equation above:

```{r}
recipe.search(key="be3c2a74ce6c4f0c83b254b34ceca7f5", query="chiken", maxFat=60)
```



# Data Exploration





# Wrap-Up